pragma abicoder v2;

contract C {
    struct S {
        uint128 p1;
        uint256[3] a;
        uint32 p2;
    }
    function f(S[] calldata c) internal returns (S[] memory) {
        return c;
    }
    function g(S[] calldata c, uint256 s, uint256 e) public returns (S[] memory) {
       // return f(c[s:e]);
        return c[s:e];
    }

    function f1(uint256[3][] calldata c) internal returns (uint256[3][] memory) {
        return c;
    }
    function g1(uint256[3][] calldata c, uint256 s, uint256 e) public returns (uint256[3][] memory) {
        return f1(c[s:e]);
    }
}
// ====
// compileViaYul: also
// ----
// g((uint128, uint256[3], uint32)[], uint256, uint256): refargs { 0x01, 0x04, 0x00000000000000000000000000000037, 0x0000000000000000000000000000000000000000000000000000000000000001, 0x0000000000000000000000000000000000000000000000000000000000000002, 0x0000000000000000000000000000000000000000000000000000000000000003, 0x00000042, 0x00000000000000000000000000000042, 0x0000000000000000000000000000000000000000000000000000000000000002, 0x0000000000000000000000000000000000000000000000000000000000000003, 0x0000000000000000000000000000000000000000000000000000000000000004, 0x0000004d, 0x0000000000000000000000000000004d, 0x0000000000000000000000000000000000000000000000000000000000000003, 0x0000000000000000000000000000000000000000000000000000000000000004, 0x0000000000000000000000000000000000000000000000000000000000000005, 0x00000058, 0x00000000000000000000000000000058, 0x0000000000000000000000000000000000000000000000000000000000000004, 0x0000000000000000000000000000000000000000000000000000000000000005, 0x0000000000000000000000000000000000000000000000000000000000000006, 0x00000063 }, 1, 3 -> refargs { 0x01, 0x02, 0x00000000000000000000000000000042, 0x0000000000000000000000000000000000000000000000000000000000000002, 0x0000000000000000000000000000000000000000000000000000000000000003, 0x0000000000000000000000000000000000000000000000000000000000000004, 0x0000004d, 0x0000000000000000000000000000004d, 0x0000000000000000000000000000000000000000000000000000000000000003, 0x0000000000000000000000000000000000000000000000000000000000000004, 0x0000000000000000000000000000000000000000000000000000000000000005, 0x58 }
// g1(uint256[3][], uint256, uint256): refargs { 0x01, 0x04, 0x0000000000000000000000000000000000000000000000000000000000000001, 0x0000000000000000000000000000000000000000000000000000000000000002, 0x0000000000000000000000000000000000000000000000000000000000000003, 0x0000000000000000000000000000000000000000000000000000000000000004, 0x0000000000000000000000000000000000000000000000000000000000000005, 0x0000000000000000000000000000000000000000000000000000000000000006, 0x0000000000000000000000000000000000000000000000000000000000000007, 0x0000000000000000000000000000000000000000000000000000000000000008, 0x0000000000000000000000000000000000000000000000000000000000000009, 0x000000000000000000000000000000000000000000000000000000000000000a, 0x000000000000000000000000000000000000000000000000000000000000000b, 0x000000000000000000000000000000000000000000000000000000000000000c }, 1, 3 -> refargs { 0x01, 0x02, 0x0000000000000000000000000000000000000000000000000000000000000004, 0x0000000000000000000000000000000000000000000000000000000000000005, 0x0000000000000000000000000000000000000000000000000000000000000006, 0x0000000000000000000000000000000000000000000000000000000000000007, 0x0000000000000000000000000000000000000000000000000000000000000008, 0x09 }
